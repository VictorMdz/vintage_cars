<div id="carouselExampleIndicators" class="carousel my-5 slide container"  data-interval="false" data-ride="carousel">
  
  <div class="carousel-inner carousel-photo-container">
    <% @car.photos.each_with_index do |photo, index| %>
      <div class="carousel-item <%= 'active' if index == 0 %>">
        <%= cl_image_tag photo.key, :quality=>100, height: 500, class: 'card-img-top d-block image-carousel'%>
      </div>
    <% end %>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<div class="container my-5">
  <h1 class="font-weight-bold"><%= @car.year %> <%= @car.brand%> <%= @car.model %></h1>
  <p><i class="fas fa-map-marker-alt"></i> <%= @car.location %></p>
</div>

<div class= "container my-5">
  <div class="row d-flex">
   <div class="col-7 my-5 mr-5">
      <h3 class="mb-3"><strong>About the car:</strong></h3>
      <p><%= @car.description %></p>
    </div>
    <div class="col-7 mr-5 py-5 border-top border-bottom">
      <h3 class="mb-3"><strong>Car specs:</strong></h3>
      <ul style="list-style-type:none">
        <li class="d-flex"> <i class="far fa-calendar-plus fa-2x m-2"></i><p class="m-2"><strong>Year: </strong><%= @car.year %></p></li>
        <li class="d-flex"> <i class="fas fa-user-ninja fa-2x m-2"></i><p class="m-2 "><strong>Seats: </strong><%= @car.seats %></p></li>
        <li class="d-flex"> <i class="fas fa-car fa-2x m-2"></i><p class="m-2"><strong>License Plat: </strong><%= @car.license_plate %></p></li>
        <li class="d-flex"> <i class="fas fa-palette fa-2x m-2"></i><p class="m-2 "><strong>Color: </strong><%= @car.color %></p></li>
        <li class="d-flex"> <i class="fas fa-cog fa-2x m-2"></i><p class="m-2 "><strong>Transmission: </strong><%= @car.transmission %></p></li>
        <li class="d-flex"> <i class="fas fa-gas-pump fa-2x m-2"></i><p class="m-2 "><strong>Energy Source: </strong><%= @car.energy_source %></p></li>
      </ul>
    </div>

    <% if !policy(@car).update? %>
      <div class="col-4 p-4 card-rent shadow-lg sticky-top h-100">
        <div>
          <h3><%= @car.price_per_hour%>â‚¬ <span class="price-hour">/hour</span></h3>
        </div>
        <div>
          <%= simple_form_for [@car, @booking] do |f| %>
            <%= f.input :starting_date, as: :string, class: "form-control", :input_html => { :type => "datetime-local", :value => Date.today, :placeholder => "Choose your date" }%>
            <%= f.input :ending_date, as: :string, class: "form-control", :input_html => { :type => "datetime-local", :value => Date.today, :placeholder => Date.today }%>
            <%= f.submit "Book now!", class: "btn-book text-center" %>
          <% end %>
        </div>
        <div>
          <p class="text-center">You won't be charged yet</p>
        </div>
      </div>
    <% end %>
   
    <div class="container">
      <% if policy(@car).update? %>
        <%= link_to car_path(@car), method: :delete, data: { confirm: "Are you sure?" } do %>
        <button type="button" class="btn btn-danger rounded-pill mr-3">Delete</button>
        <%= link_to "Edit", edit_car_path(@car), class: "btn btn-light rounded-pill"%>
      <% end %>
      <% end %>
    </div>
  </div>
</div>
